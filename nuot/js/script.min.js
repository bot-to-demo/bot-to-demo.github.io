"use strict";function asyncGeneratorStep(e,t,n,o,r,s,a){try{var c=e[s](a),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var s=e.apply(t,n);function a(e){asyncGeneratorStep(s,o,r,a,c,"next",e)}function c(e){asyncGeneratorStep(s,o,r,a,c,"throw",e)}a(void 0)}))}}window.onload=function(){window.oldScrollY=window.scrollY,document.onscroll=function(e){var t=window.oldScrollY>window.scrollY?1:2;window.oldScrollY=window.scrollY;var n=document.querySelector("header");2==t&&window.scrollY>400?n.style.transform="translateY(-100%)":1==t&&(n.style.transform="translateY(0)")},function(){var e=document.querySelector(".header-search"),t=document.querySelector(".header__search-wrapper"),n=document.querySelector(".search-input"),o=document.querySelector(".nuot__grid-wrapper");function r(){return(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t={filter_name:n.value},$.ajax({url:"".concat(window.location.href,"index.php?route=common/search/autocomplete/"),type:"get",data:t,dataType:"json",success:function(e){console.log(e),e.map((function(e){document.querySelector(".search__results-container").insertAdjacentHTML("beforeend",'<a href="'.concat(e.href,'">').concat(e.name,"</a>"))}))},error:function(e,t,n){throw new Error(response.status)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){
//!переделать функцию для логина, для мобильного меню
e.classList.toggle("_icon-search"),e.classList.toggle("_icon-cancel"),e.classList.toggle("rotate-anim"),t.classList.toggle("show")}n.addEventListener("input",(function(e){n.value.length>=3&&function(){r.apply(this,arguments)}()})),document.addEventListener("click",(function(n){var o=n.target,r=o==t||t.contains(o),a=o==e,c=t.classList.contains("show");r||a||!c||s()})),e.addEventListener("click",(function(e){s(),n.focus()})),o&&o.addEventListener("click",(function(e){e.target.parentNode.classList.contains("button-link")||(window.location.href="www.yourtube.com")}))}(),function(){if(document.querySelector(".new-collection-slider")){function e(){new Swiper(".new-collection-slider",{pagination:{el:".new-collection-pagination"},autoplay:{delay:5e3},watchOverflow:!0,breakpoints:{521:{slidesPerView:3}}})}window.addEventListener("resize",(function(){window.matchMedia("(max-width: 520px)").matches&&e()})),window.matchMedia("(max-width: 520px)").matches&&e()}if(document.querySelector(".sale__swiper"))new Swiper(".sale__swiper",{watchOverflow:!0,pagination:{el:".sale-swiper-pagination",type:"bullets"},autoplay:{delay:5e3},breakpoints:{769:{navigation:{nextEl:".sale-swiper-next",prevEl:".sale-swiper-prev"},pagination:{el:".sale-swiper-pagination",type:"fraction"},scrollbar:{el:".sale-swiper-scrollbar",draggable:!0}}}});if(document.querySelector(".blog__swiper"))new Swiper(".blog__swiper",{watchOverflow:!0,slidesPerView:1,spaceBetween:10,pagination:{el:".blog-swiper-pagination",type:"bullets"},breakpoints:{769:{spaceBetween:20,navigation:{nextEl:".blog-swiper-next",prevEl:".blog-swiper-prev"},pagination:{el:".blog-swiper-pagination",type:"fraction"},scrollbar:{el:".blog-swiper-scrollbar",draggable:!0}},641:{slidesPerView:2}}})}(),function(){var e=document.querySelector(".unknown-user"),t=document.querySelector(".auth__wrapper"),n=document.querySelector(".menu__mobile-unregistered"),o=document.querySelector(".personal__wrapper"),r=document.querySelector(".menu__icon"),s=document.querySelector(".menu__mobile-modal"),a=document.querySelector("#menu__mobile-modal");if(e){n.addEventListener("click",(function(e){"none"==getComputedStyle(t).display?(s.classList.toggle("active-modal"),a.classList.toggle("active-modal"),o.classList.toggle("show")):(s.classList.toggle("active-modal"),a.classList.toggle("active-modal"),t.classList.toggle("show"))})),e.addEventListener("click",(function(e){"none"==getComputedStyle(t).display?o.classList.toggle("show"):t.classList.toggle("show")})),//!сделать универсальным
document.addEventListener("click",(function(n){if("none"==getComputedStyle(t).display){var r=n.target,s=r==o||o.contains(r),a=r==e,c=o.classList.contains("show");s||a||!c||n.target.classList.contains("menu__mobile-unregistered")||o.classList.toggle("show")}else{var i=n.target,l=i==t||t.contains(i),u=i==e,d=t.classList.contains("show");l||u||!d||n.target.classList.contains("menu__mobile-unregistered")||t.classList.toggle("show")}}));var c,i,l=document.getElementById("numberForm"),u=l.getElementsByTagName("input"),d=document.getElementById("codeForm"),p=d.getElementsByTagName("input"),m=(document.getElementById("telephone"),document.querySelector(".refresh-form")),g=document.querySelector(".number__container"),w=document.querySelector(".code__container"),y=document.querySelector(".code__container-text");function f(){return h.apply(this,arguments)}function h(){return(h=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"".concat(window.location.href,"index.php?route=account/login/turboSmsClearAttemps"),type:"post",data:i,dataType:"json",success:function(){console.log("true")},error:function(e,t,n){throw new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return _.apply(this,arguments)}function _(){return(_=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"".concat(window.location.href,"index.php?route=account/login/turboSmsGetCode"),type:"post",data:t,dataType:"json",success:function(e){console.log(e),!0===e.send_sms&&(g.style.display="none",w.style.display="block",y.textContent="+".concat(e.phone),i=e.send_code,t=e.phone)},error:function(e,t,n){throw u[0].classList.add("error-input"),new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=_asyncToGenerator(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"".concat(window.location.href,"index.php?route=account/login/turboSmsCheckCode"),type:"post",data:n,dataType:"json",success:function(e){if(console.log(e),!0===e.code_matching&&!1===e.is_auth)t.style.display="none",o.classList.toggle("show"),document.getElementById("telephone").value=e.telephone,document.getElementById("code").value=e.code;else if(!1===e.code_matching&&e.try_count<=5)p[0].classList.add("error-input"),document.querySelector(".code-error-block").textContent=e.code_error;else if(!1===e.code_matching&&e.try_count>5)p[0].classList.add("error-input"),document.querySelector(".code-error-block").textContent=e.try_error,m.style.display="block";else if(!0===e.is_auth){b({telephone:e.telephone,code:e.code})}},error:function(e,t,n){throw p[0].classList.add("error-input"),new Error(response.status)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return(S=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"".concat(window.location.href,"index.php?route=account/login/turboSmsLogin"),type:"post",data:t,dataType:"json",success:function(){console.log("ok")},error:function(e,t,n){throw new Error(response.status)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.querySelector(".back-number").addEventListener("click",(function(e){g.style.display="block",w.style.display="none",document.querySelector(".send-tel").disabled=!1,f(),console.log(i)})),m.addEventListener("click",(function(e){f(),setTimeout((function(){return v(c)}),400),console.log(i)})),l.addEventListener("submit",(function(e){e.preventDefault();var t=u[0].value;""!==t&&(c={phone:t},document.querySelector(".send-tel").disabled=!0,v(c))})),d.addEventListener("submit",(function(e){e.preventDefault();var t=p[0].value;""!==t&&function(e){L.apply(this,arguments)}({sms_code:t,opencart_code:i,phone:c})}))}if(r){var E=document.querySelector("#female-mob-sub"),k=document.querySelector("#male-mob-sub"),q=document.querySelector("#child-mob-sub");r.addEventListener("click",(function(e){s.classList.toggle("active-modal"),a.classList.toggle("active-modal")})),//!сделать универсальным
document.addEventListener("click",(function(e){(e.target.classList.contains("active-modal")||e.target.classList.contains("menu__mobile-close"))&&(s.classList.toggle("active-modal"),a.classList.toggle("active-modal")),(e.target.classList.contains("female-js")||e.target.parentNode.classList.contains("female-js"))&&E.classList.toggle("show"),(e.target.classList.contains("male-js")||e.target.parentNode.classList.contains("male-js"))&&k.classList.toggle("show"),(e.target.classList.contains("child-js")||e.target.parentNode.classList.contains("child-js"))&&q.classList.toggle("show"),e.target.classList.contains("menu__mob-sub-title")&&e.target.parentNode.classList.toggle("show")}))}}()};