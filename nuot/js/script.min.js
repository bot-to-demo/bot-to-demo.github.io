"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){asyncGeneratorStep(a,o,r,i,s,"next",e)}function s(e){asyncGeneratorStep(a,o,r,i,s,"throw",e)}i(void 0)}))}}window.onload=function(){window.oldScrollY=window.scrollY,document.onscroll=function(e){var t=window.oldScrollY>window.scrollY?1:2;window.oldScrollY=window.scrollY;var n=document.querySelector("header");2==t&&window.scrollY>400?n.style.transform="translateY(-100%)":1==t&&(n.style.transform="translateY(0)"),2==t&&window.scrollY>1500?document.getElementById("topBtn").style.display="flex":document.getElementById("topBtn").style.display="none"},document.getElementById("topBtn").onclick=function(){window.scrollTo({top:0,behavior:"smooth"})},function(){var e=document.querySelector(".header-search"),t=document.querySelector(".header__search-wrapper"),n=document.querySelector(".search-input"),o=document.querySelector(".nuot__grid-wrapper");function r(){return(r=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t={filter_name:n.value},$.ajax({url:"index.php?route=common/search/autocomplete/",type:"get",data:t,dataType:"json",success:function(e){console.log(e),e.map((function(e){document.querySelector(".search__results-container").insertAdjacentHTML("beforeend",'<a href="'.concat(e.href,'">').concat(e.name,"</a>"))}))},error:function(e,t,n){throw new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){
//!переделать функцию для логина, для мобильного меню
e.classList.toggle("_icon-search"),e.classList.toggle("_icon-cancel"),e.classList.toggle("rotate-anim"),t.classList.toggle("show")}n.addEventListener("input",(function(e){n.value.length>=3&&function(){r.apply(this,arguments)}()})),document.addEventListener("click",(function(n){var o=n.target,r=o==t||t.contains(o),i=o==e,s=t.classList.contains("show");r||i||!s||a()})),e.addEventListener("click",(function(e){a(),n.focus()})),o&&o.addEventListener("click",(function(e){e.target.parentNode.classList.contains("button-link")||(window.location.href="www.yourtube.com")}))}(),function(){var e=document.querySelector(".unknown-user"),t=document.querySelector(".auth__wrapper"),n=document.querySelector(".menu__mobile-unregistered"),o=document.querySelector(".personal__wrapper"),r=document.querySelector(".menu__icon"),a=document.querySelector(".menu__mobile-modal"),i=document.querySelector("#menu__mobile-modal");if(e){$("#telephoneInput").click((function(){$(this).setCursorPosition(5)})).mask("+380(99)9999999"),$("#telephoneInput").mask("+380(99)9999999"),$.fn.setCursorPosition=function(e){if($(this).get(0).setSelectionRange)$(this).get(0).setSelectionRange(e,e);else if($(this).get(0).createTextRange){var t=$(this).get(0).createTextRange();t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select()}},n.addEventListener("click",(function(e){"none"==getComputedStyle(t).display?(a.classList.toggle("active-modal"),i.classList.toggle("active-modal"),o.classList.toggle("show")):(a.classList.toggle("active-modal"),i.classList.toggle("active-modal"),t.classList.toggle("show"))})),e.addEventListener("click",(function(e){"none"==getComputedStyle(t).display?o.classList.toggle("show"):t.classList.toggle("show")})),//!сделать универсальным
document.addEventListener("click",(function(n){if("none"==getComputedStyle(t).display){var r=n.target,a=r==o||o.contains(r),i=r==e,s=o.classList.contains("show");a||i||!s||n.target.classList.contains("menu__mobile-unregistered")||o.classList.toggle("show")}else{var c=n.target,l=c==t||t.contains(c),u=c==e,d=t.classList.contains("show");l||u||!d||n.target.classList.contains("menu__mobile-unregistered")||t.classList.toggle("show")}}));var s,c,l=document.getElementById("numberForm"),u=l.getElementsByTagName("input"),d=document.getElementById("codeForm"),p=d.getElementsByTagName("input"),m=document.querySelector(".refresh-form"),g=document.querySelector(".number__container"),h=document.querySelector(".code__container"),w=document.querySelector(".code__container-text");function f(){return v.apply(this,arguments)}function v(){return(v=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"index.php?route=account/login/turboSmsClearAttemps",type:"post",data:s,dataType:"json",success:function(){p[0].value=""},error:function(e,t,n){throw new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=_asyncToGenerator(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"index.php?route=account/login/turboSmsGetCode",type:"post",data:t,dataType:"json",success:function(e){console.log(e),!0===e.send_sms&&(g.style.display="none",h.style.display="block",w.textContent="+".concat(e.phone),c=e.send_code,t=e.phone,setTimeout((function(){return m.style.display="block"}),6e4))},error:function(e,t,n){throw u[0].classList.add("error-input"),setTimeout((function(){return u[0].classList.remove("error-input")}),5e3),document.querySelector(".send-tel").disabled=!1,new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=_asyncToGenerator(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{$.ajax({url:"index.php?route=account/login/turboSmsCheckCode",type:"post",data:n,dataType:"json",success:function(e){console.log(e),!0===e.code_matching&&!1===e.is_auth?(t.style.display="none",o.classList.toggle("show"),document.getElementById("telephone").value=e.telephone,document.getElementById("codePerson").value=e.code):!1===e.code_matching&&e.try_count<=5||!0===e.is_auth&&!1===e.code_matching&&e.try_count<=5?(p[0].classList.add("error-input"),setTimeout((function(){return p[0].classList.remove("error-input")}),5e3),document.querySelector(".code-error-block").textContent=e.code_error):!1===e.code_matching&&e.try_count>5||!0===e.is_auth&&!1===e.code_matching&&e.try_count>5?(p[0].classList.add("error-input"),setTimeout((function(){return p[0].classList.remove("error-input")}),5e3),document.querySelector(".code-error-block").textContent=e.try_error,m.style.display="block"):!0===e.is_auth&&!0===e.code_matching&&document.getElementById("codeForm").submit()},error:function(e,t,n){throw p[0].classList.add("error-input"),setTimeout((function(){return p[0].classList.remove("error-input")}),5e3),new Error(e)}})}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.querySelector(".back-number").addEventListener("click",(function(e){g.style.display="block",h.style.display="none",document.querySelector(".send-tel").disabled=!1,f()})),m.addEventListener("click",(function(e){f(),setTimeout((function(){return y(s)}),400)})),l.addEventListener("submit",(function(e){e.preventDefault();var t=u[0].value;if(""!==t&&!t.includes("_")&&""==u[1].value){var n=t.replace("(","").replace(")","");s={phone:n},document.querySelector(".send-tel").disabled=!0,y(s)}})),d.addEventListener("submit",(function(e){e.preventDefault();var t=p[0].value;6==t.length&&""==p[1].value&&function(e){_.apply(this,arguments)}({sms_code:t,opencart_code:c,phone:s})}));var k=document.querySelector("#personal-data");k.addEventListener("submit",(function(e){e.preventDefault(),""==k.querySelector('input[name="chekoutPersone"]').value&&k.submit()}))}if(r){var S=document.querySelector("#female-mob-sub"),L=document.querySelector("#male-mob-sub"),E=document.querySelector("#child-mob-sub");r.addEventListener("click",(function(e){a.classList.toggle("active-modal"),i.classList.toggle("active-modal")})),//!сделать универсальным
document.addEventListener("click",(function(e){(e.target.classList.contains("active-modal")||e.target.classList.contains("menu__mobile-close"))&&(a.classList.toggle("active-modal"),i.classList.toggle("active-modal")),(e.target.classList.contains("female-js")||e.target.parentNode.classList.contains("female-js"))&&S.classList.toggle("show"),(e.target.classList.contains("male-js")||e.target.parentNode.classList.contains("male-js"))&&L.classList.toggle("show"),(e.target.classList.contains("child-js")||e.target.parentNode.classList.contains("child-js"))&&E.classList.toggle("show"),e.target.classList.contains("menu__mob-sub-title")&&e.target.parentNode.classList.toggle("show")}))}}(),function(){if(document.querySelector(".new-collection-slider")){window.matchMedia("(max-width: 520px)").matches&&new Swiper(".new-collection-slider",{pagination:{el:".new-collection-pagination"},watchOverflow:!0,breakpoints:{521:{slidesPerView:3}}})}if(document.querySelector(".sale__swiper"))new Swiper(".sale__swiper",{watchOverflow:!0,pagination:{el:".sale-swiper-pagination",type:"bullets"},breakpoints:{769:{navigation:{nextEl:".sale-swiper-next",prevEl:".sale-swiper-prev"},pagination:{el:".sale-swiper-pagination",type:"fraction"},scrollbar:{el:".sale-swiper-scrollbar",draggable:!0}}}});if(document.querySelector(".blog__swiper"))new Swiper(".blog__swiper",{watchOverflow:!0,slidesPerView:1,spaceBetween:10,pagination:{el:".blog-swiper-pagination",type:"bullets"},breakpoints:{769:{spaceBetween:20,navigation:{nextEl:".blog-swiper-next",prevEl:".blog-swiper-prev"},pagination:{el:".blog-swiper-pagination",type:"fraction"},scrollbar:{el:".blog-swiper-scrollbar",draggable:!0},slidesPerView:2},641:{slidesPerView:2}}});if(document.querySelector(".new-block__swiper"))new Swiper(".new-block__swiper",{watchOverflow:!0,slidesPerView:2,spaceBetween:6,pagination:{el:".new-block-swiper-pagination",type:"bullets"},breakpoints:{1440:{slidesPerView:4,navigation:{nextEl:".new-block-swiper-next",prevEl:".new-block-swiper-prev"},pagination:{el:".new-block-swiper-pagination",type:"fraction"},scrollbar:{el:".new-block-swiper-scrollbar",draggable:!0}},1170:{slidesPerView:3,navigation:{nextEl:".new-block-swiper-next",prevEl:".new-block-swiper-prev"},pagination:{el:".new-block-swiper-pagination",type:"fraction"},scrollbar:{el:".new-block-swiper-scrollbar",draggable:!0}},769:{spaceBetween:6,slidesPerView:2,navigation:{nextEl:".new-block-swiper-next",prevEl:".new-block-swiper-prev"},pagination:{el:".new-block-swiper-pagination",type:"fraction"},scrollbar:{el:".new-block-swiper-scrollbar",draggable:!0}}}})}(),function(){if(document.querySelector(".new-block__swiper")){window.matchMedia("(min-width: 640px)").matches&&document.querySelectorAll(".product__buy-container").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault()}))})),document.querySelectorAll(".favorit").forEach((function(e){e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("_icon-favorites")?(t.classList.remove("_icon-favorites"),t.classList.add("_icon-favorites-fill")):t.classList.contains("_icon-favorites-fill")&&(t.classList.remove("_icon-favorites-fill"),t.classList.add("_icon-favorites"))}))}));var e=new Swiper(".product-card-swiper",{watchOverflow:!0,slidesPerView:1,navigation:{nextEl:".product-card-swiper-next",prevEl:".product-card-swiper-prev"}});document.querySelectorAll("button[data-color]").forEach((function(t){t.addEventListener("click",(function(t){var n=t.target,o=n.getAttribute("data-color"),r=n.parentNode.parentNode.parentNode,a=r.querySelector("[data-json]").getAttribute("data-json"),i=JSON.parse(a);n.parentNode.querySelector(".active-color").classList.remove("active-color"),n.classList.add("active-color"),i.forEach((function(t){if(t.colorID==o){var n=r.querySelector(".product__buy-container").querySelector(".product__sizes-container");if(n){for(;n.firstChild;)n.removeChild(n.firstChild);t.colorSize.forEach((function(e){n.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t<button class="product__sizes-item" type="button" '.concat(e.isDisabled,">").concat(e.size,"</button>\n\t\t\t\t\t\t\t\t\t"))}))}for(var a=r.querySelector(".product__card-sub-wrapper");a.firstChild;)a.removeChild(a.firstChild);t.colorSrc.forEach((function(e){a.insertAdjacentHTML("afterbegin",'\n\t\t\t\t\t\t\t\t\t<div class="product__card-img-cont swiper-slide">\n\t\t\t\t\t\t\t\t\t\t<img class="slide-img" src="'.concat(e,'">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'))})),e.map((function(e){e.update()}))}}))}))}))}var t=document.querySelector("#newstler"),n=document.querySelector(".footer__sub-action"),o=document.querySelector(".footer__sub-success");t.addEventListener("submit",(function(e){e.preventDefault();var r=t.getElementsByTagName("input"),a={email:r[0].value};""==r[1].value&&$.ajax({url:"index.php?route=mail/newsletter/setToDatabase",type:"post",data:a,dataType:"json",success:function(e){console.log("ok"),r[0].value="",n.style.display="none",o.style.display="block"},error:function(e,t,n){console.log(e)}})}));var r=document.querySelectorAll(".btn-slider-span");r.length>0&&r.forEach((function(e){e.parentNode.querySelector("._icon-arrow-slider-1").classList.contains("swiper-button-lock")&&(e.style.display="none")}))}()};var webgl=document.querySelector(".webgl");if(webgl){function cover(e,t){return calculate(e,t,!0)}function contain(e,t){return calculate(e,t,!1)}function calculate(e,t,n){var o,r=t.width||t.w,a=t.height||t.h,i=e.width||e.w,s=e.height||e.h,c=r/i,l=a/s;return{left:r-i*(o=n?c>l?c:l:c<l?c:l)>>1,top:a-s*o>>1,width:i*o,height:s*o,scale:o}}function loadImages(e,t){var n=[],o=[];e.forEach((function(r){var a=new Image,i=r.dataImg,s=r.link;a.onload=function(){n.push(a),o.push({path:i,img:a,link:s}),n.length===e.length&&t(o)},a.src=i}))}var Sketch=function(){function e(){var t=this;_classCallCheck(this,e),this.app=new PIXI.Application({backgroundColor:16775926,width:1440,height:388}),document.querySelector(".webgl").appendChild(this.app.view),this.margin=6,this.scroll=1,this.scrollTarget=2,this.width=(window.innerWidth-2*this.margin)/7,this.height=388,this.container=new PIXI.Container,this.app.stage.addChild(this.container),this.images=[{dataImg:"./images/cat-1.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-2.jpg",link:"https://www.pixijs.com/"},{dataImg:"./images/cat-3.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-4.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-5.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-6.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-7.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-8.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-9.jpg",link:"https://learn.javascript.ru/form-elements"},{dataImg:"./images/cat-10.jpg",link:"https://learn.javascript.ru/form-elements"}],this.WHOLEWIDTH=this.images.length*(this.width+this.margin),loadImages(this.images,(function(e){t.loadedImages=e,t.add(),t.render(),t.scrollEvent()}))}return _createClass(e,[{key:"scrollEvent",value:function(){var e=this;document.querySelector(".webgl").addEventListener("mousewheel",(function(t){e.scrollTarget=t.wheelDelta/16}))}},{key:"add",value:function(){var e=this,t={w:this.width,h:this.height};this.thumbs=[],this.loadedImages.forEach((function(n,o){var r=PIXI.Texture.from(n.img),a=new PIXI.Sprite(r),i=new PIXI.Container,s=new PIXI.Container,c=new PIXI.Sprite(PIXI.Texture.WHITE);c.width=e.width,c.height=e.height,a.mask=c,a.anchor.set(.5),a.position.set(a.texture.orig.width/2,a.texture.orig.height/2);var l=cover({w:a.texture.orig.width,h:a.texture.orig.height},t);s.position.set(l.left,cover.top),s.scale.set(l.scale,cover.scale),i.x=(e.margin+e.width)*o,i.y=e.height/35,s.addChild(a),i.interactive=!0,i.buttonMode=!0,i.link=n.link,i.on("mouseover",e.mouseOn),i.on("mouseout",e.mouseOut),i.on("click",e.onClick),i.addChild(s),i.addChild(c),e.container.addChild(i),e.thumbs.push(i)}))}},{key:"onClick",value:function(e){window.location.assign(e.target.link)}},{key:"mouseOn",value:function(e){var t=e.target.children[0].children[0];gsap.to(t.scale,{duration:1,x:1.1,y:1.1}),document.querySelector("body").style.overflowY="hidden",document.querySelector("header").style.paddingRight="15px",document.querySelector("main").style.paddingRight="15px"}},{key:"mouseOut",value:function(e){var t=e.currentTarget.children[0].children[0];gsap.to(t.scale,{duration:1,x:1,y:1}),document.querySelector("body").style.overflowY="scroll",document.querySelector("header").style.paddingRight="0px",document.querySelector("main").style.paddingRight="0px"}},{key:"calcPos",value:function(e,t){return(e+t+this.WHOLEWIDTH+this.width+this.margin)%this.WHOLEWIDTH-this.width-this.margin}},{key:"render",value:function(){var e=this;this.app.ticker.add((function(){e.app.renderer.render(e.container),e.scroll-=.1*(e.scroll-e.scrollTarget),e.scroll*=.9,e.thumbs.forEach((function(t){t.position.x=e.calcPos(e.scroll,t.position.x)}))}))}}]),e}();new Sketch}